<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Satellite Weather Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #ce99fc;
        }
        h1 {
            color: #2c3e50;
        }
        .game-container {
            margin: 20px auto;
            width: 60%;
            border: 2px solid #7609d6;
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            display: none; /* Oculta las prguntas */
        }
        .satellite-image {
            width: 100%;
            border-radius: 10px;
        }
        button {
            margin: 10px;
            padding: 10px 20px;
            border: none;
            background-color: #3498db;
            color: white;
            border-radius: 5px;
            cursor: pointer;
            transition: transform 0.2s ease, background-color 0.2s ease;
        }
        button:hover {
            background-color: #2980b9;
            transform: scale(1.05); /* Un poco de zoom */
        }
        button:active {
            transform: scale(0.95); /* Hacer los botones interactivos al pasar el mouse */
        }
        /* Estética del inicio */
        .title-screen {
            margin-top: 30px;
            text-align: center;
        }
        .title-image {
            width: 50%;
            border-radius: 10px;
        }
        /* Estilo de la alerta  */
        .popup {
            display: none; /* Hidden by default */
            position: fixed;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 255, 255, 0.9);
            border: 2px solid #3498db;
            border-radius: 10px;
            padding: 20px;
            z-index: 1000; 
        }
        .popup.show {
            display: block; /* Aparece cuando se activa */
        }
        .popup .close-btn, .popup .next-btn {
            border: none;
            background-color: #6b30c9;
            color: white;
            border-radius: 5px;
            padding: 10px 20px;
            cursor: pointer;
            margin-top: 10px; /* Añadimos margen para el espaciado */
        }
        .popup .close-btn:hover, .popup .next-btn:hover {
            background-color: #642bc0;
        }
        .result-icon {
            font-size: 30px; /* Tamaño de la palomita y la cruz */
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <!-- Configuración del título -->
    <div class="title-screen" id="titleScreen">
        <h1>Learn about Satellites and Weather!</h1>
        <img src="images/title-image.png" alt="Weather Satellite" class="title-image">
        <br>
        <button onclick="startGame()">Start Game</button> <!-- Botón para mostrar las preguntas -->
    </div>

    
    <div class="game-container" id="gameContainer">
        <div id="question">
            <h2>What does this satellite image show?</h2>
            <img src="" id="satelliteImg" class="satellite-image" alt="Satellite Image">
            <div id="answers">
                <!-- Los botones se generan automáticamente -->
            </div>
        </div>
    </div>

    <!--Alertas del resultado -->
    <div class="popup" id="feedbackPopup">
        <span id="feedbackMessage"></span>
        <button class="close-btn" onclick="closePopup()" style="display:none;">Close</button>
        <button class="next-btn" onclick="nextQuestion()" style="display:none;">Next</button>
    </div>

    <script>
        // Arreglo para guardar el valor de la respuesta correcta en base a la pregunta en pantalla
        const satelliteImages = [
            { url: 'images/thermical.jpeg', correct: 'Thermical analysis', wrong: ['Sea level', 'Pollution'] },
            { url: 'images/country.png', correct: 'Cloud covering', wrong: ['Altitude Level', 'Pollution'] },
            { url: 'images/pollution.jpg', correct: 'Pollution', wrong: ['Water', 'Urban analysis'] },
            { url: 'images/deforestation.png', correct: 'Deforestation', wrong: ['Snow', 'Heating index'] },
           
        ];

        let currentQuestion = 0;
        let correctAnswered = false;
        let correctAnswersCount = 0;
        
        function startGame() {
            document.getElementById('titleScreen').style.display = 'none';  // Hide the title screen
            document.getElementById('gameContainer').style.display = 'block';  // Show the game container
            loadImage();  // Load the first image
        }

        // Método para cargar imagen y pregunta
        function loadImage() {
            const img = document.getElementById('satelliteImg');
            const currentImage = satelliteImages[currentQuestion];
            img.src = currentImage.url;

            // Hacer aleatorias las respuestas
            const allAnswers = [currentImage.correct, ...currentImage.wrong].sort(() => Math.random() - 0.5);
            
            const answersContainer = document.getElementById('answers');
            answersContainer.innerHTML = ''; // Clear previous buttons

            
            allAnswers.forEach(answer => {
                const button = document.createElement('button');
                button.textContent = answer;
                button.onclick = () => checkAnswer(answer);
                answersContainer.appendChild(button);
            });

            correctAnswered = false;
        }

        // Método para checar la respuesta
        function checkAnswer(answer) {
            const correctAnswer = satelliteImages[currentQuestion].correct;
            const feedbackMessage = document.getElementById('feedbackMessage');
            const popup = document.getElementById('feedbackPopup');

            if (answer === correctAnswer) {
                feedbackMessage.innerHTML = '<span class="result-icon">✅</span> Correct! Let´s keep learning!';
                correctAnswered = true; 
                correctAnswersCount++; 
                document.querySelector('.next-btn').style.display = 'block'; 
                document.querySelector('.close-btn').style.display = 'none'; 
            } else {
                feedbackMessage.innerHTML = '<span class="result-icon">❌</span> Oops! Try again.';
                document.querySelector('.close-btn').style.display = 'block'; 
                document.querySelector('.next-btn').style.display = 'none'; 
            }

            
            popup.classList.add('show');
        }

        // Método para cerrar la alerta
        function closePopup() {
            const popup = document.getElementById('feedbackPopup');
            popup.classList.remove('show'); // Hide the popup
            loadImage(); // Reload the image and reset answer buttons
        }

        // Para pasar la siguiente pregunta tienes que contestar bien
        function nextQuestion() {
            if (!correctAnswered) {
                alert("Please select the correct answer before moving to the next question.");
                return; 
            }

            currentQuestion++;
            if (currentQuestion >= satelliteImages.length  || correctAnswersCount === 4) {
                alert("You completed the game! You've learned about satellites and weather forecasting!");
                currentQuestion = 0;  // Resetea a la primera pregunta
            }

            loadImage();
            const popup = document.getElementById('feedbackPopup');
            popup.classList.remove('show'); // Oculta la alerta
        }
    </script>
</body>
</html>
